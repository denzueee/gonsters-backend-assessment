{
    "info": {
        "_postman_id": "b0849998-d501-46e2-b107-efe6f1de5416",
        "name": "GONSTERS Backend API",
        "description": "Complete API collection untuk GONSTERS Backend Assessment\n\n**Base URL**: http://localhost:5000\n\n**Authentication**: JWT Bearer Token\n\n**Test Coverage**: 87/87 tests (100%)\n**Code Coverage**: 79.17%",
        "schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json",
        "_exporter_id": "39895684"
    },
    "item": [
        {
            "name": "Authentication",
            "item": [
                {
                    "name": "Register User",
                    "event": [
                        {
                            "listen": "test",
                            "script": {
                                "exec": [
                                    "pm.test(\"Status code is 201\", function () {",
                                    "    pm.response.to.have.status(201);",
                                    "});",
                                    "",
                                    "pm.test(\"Response has user data\", function () {",
                                    "    var jsonData = pm.response.json();",
                                    "    pm.expect(jsonData.status).to.eql('success');",
                                    "    pm.expect(jsonData.user).to.have.property('username');",
                                    "});"
                                ],
                                "type": "text/javascript"
                            }
                        }
                    ],
                    "request": {
                        "method": "POST",
                        "header": [
                            {
                                "key": "Content-Type",
                                "value": "application/json"
                            }
                        ],
                        "body": {
                            "mode": "raw",
                            "raw": "{\n  \"username\": \"john_doe\",\n  \"email\": \"john.doe@factory.com\",\n  \"password\": \"SecurePass123!\",\n  \"role\": \"Operator\",\n  \"factory_id\": \"factory-A\",\n  \"department\": \"Production\"\n}"
                        },
                        "url": {
                            "raw": "{{baseUrl}}/api/v1/auth/register",
                            "host": ["{{baseUrl}}"],
                            "path": ["api", "v1", "auth", "register"]
                        },
                        "description": "Mendaftarkan user baru ke sistem.\n\n**Roles**: Operator, Supervisor, Management"
                    },
                    "response": []
                },
                {
                    "name": "Login",
                    "event": [
                        {
                            "listen": "test",
                            "script": {
                                "exec": [
                                    "pm.test(\"Status code is 200\", function () {",
                                    "    pm.response.to.have.status(200);",
                                    "});",
                                    "",
                                    "pm.test(\"Response has tokens\", function () {",
                                    "    var jsonData = pm.response.json();",
                                    "    pm.expect(jsonData).to.have.property('access_token');",
                                    "    pm.expect(jsonData).to.have.property('refresh_token');",
                                    "    ",
                                    "    // Save tokens to environment",
                                    "    pm.environment.set('access_token', jsonData.access_token);",
                                    "    pm.environment.set('refresh_token', jsonData.refresh_token);",
                                    "});"
                                ],
                                "type": "text/javascript",
                                "packages": {},
                                "requests": {}
                            }
                        }
                    ],
                    "request": {
                        "method": "POST",
                        "header": [
                            {
                                "key": "Content-Type",
                                "value": "application/json"
                            }
                        ],
                        "body": {
                            "mode": "raw",
                            "raw": "{\n  \"username\": \"manager1\",\n  \"password\": \"Password123!\"\n}"
                        },
                        "url": {
                            "raw": "{{baseUrl}}/api/v1/auth/login",
                            "host": ["{{baseUrl}}"],
                            "path": ["api", "v1", "auth", "login"]
                        },
                        "description": "Login dan mendapatkan JWT access token & refresh token"
                    },
                    "response": []
                },
                {
                    "name": "Get Current User",
                    "event": [
                        {
                            "listen": "test",
                            "script": {
                                "exec": [
                                    "pm.test(\"Status code is 200\", function () {",
                                    "    pm.response.to.have.status(200);",
                                    "});",
                                    "",
                                    "pm.test(\"Response has user data\", function () {",
                                    "    var jsonData = pm.response.json();",
                                    "    pm.expect(jsonData.user).to.have.property('username');",
                                    "    pm.expect(jsonData.user).to.have.property('permissions');",
                                    "});"
                                ],
                                "type": "text/javascript"
                            }
                        }
                    ],
                    "request": {
                        "auth": {
                            "type": "bearer",
                            "bearer": [
                                {
                                    "key": "token",
                                    "value": "{{access_token}}",
                                    "type": "string"
                                }
                            ]
                        },
                        "method": "GET",
                        "header": [],
                        "url": {
                            "raw": "{{baseUrl}}/api/v1/auth/me",
                            "host": ["{{baseUrl}}"],
                            "path": ["api", "v1", "auth", "me"]
                        },
                        "description": "Mendapatkan informasi user yang sedang login"
                    },
                    "response": []
                },
                {
                    "name": "Refresh Token",
                    "event": [
                        {
                            "listen": "test",
                            "script": {
                                "exec": [
                                    "pm.test(\"Status code is 200\", function () {",
                                    "    pm.response.to.have.status(200);",
                                    "});",
                                    "",
                                    "pm.test(\"Response has new access token\", function () {",
                                    "    var jsonData = pm.response.json();",
                                    "    pm.expect(jsonData).to.have.property('access_token');",
                                    "    pm.environment.set('access_token', jsonData.access_token);",
                                    "});"
                                ],
                                "type": "text/javascript"
                            }
                        }
                    ],
                    "request": {
                        "method": "POST",
                        "header": [
                            {
                                "key": "Content-Type",
                                "value": "application/json"
                            }
                        ],
                        "body": {
                            "mode": "raw",
                            "raw": "{\n  \"refresh_token\": \"{{refresh_token}}\"\n}"
                        },
                        "url": {
                            "raw": "{{baseUrl}}/api/v1/auth/refresh",
                            "host": ["{{baseUrl}}"],
                            "path": ["api", "v1", "auth", "refresh"]
                        },
                        "description": "Refresh access token menggunakan refresh token"
                    },
                    "response": []
                },
                {
                    "name": "Logout",
                    "request": {
                        "auth": {
                            "type": "bearer",
                            "bearer": [
                                {
                                    "key": "token",
                                    "value": "{{access_token}}",
                                    "type": "string"
                                }
                            ]
                        },
                        "method": "POST",
                        "header": [],
                        "url": {
                            "raw": "{{baseUrl}}/api/v1/auth/logout",
                            "host": ["{{baseUrl}}"],
                            "path": ["api", "v1", "auth", "logout"]
                        },
                        "description": "Logout user (client harus menghapus token)"
                    },
                    "response": []
                }
            ],
            "description": "Endpoint untuk autentikasi dan manajemen user"
        },
        {
            "name": "Data Ingestion & Retrieval",
            "item": [
                {
                    "name": "Create Machine",
                    "event": [
                        {
                            "listen": "test",
                            "script": {
                                "exec": [
                                    "pm.test(\"Status code is 201\", function () {",
                                    "    pm.response.to.have.status(201);",
                                    "});",
                                    "",
                                    "pm.test(\"Machine created\", function () {",
                                    "    var jsonData = pm.response.json();",
                                    "    pm.expect(jsonData.status).to.eql('success');",
                                    "    pm.expect(jsonData).to.have.property('machine_id');",
                                    "});"
                                ],
                                "type": "text/javascript"
                            }
                        }
                    ],
                    "request": {
                        "auth": {
                            "type": "bearer",
                            "bearer": [
                                {
                                    "key": "token",
                                    "value": "{{access_token}}",
                                    "type": "string"
                                }
                            ]
                        },
                        "method": "POST",
                        "header": [
                            {
                                "key": "Content-Type",
                                "value": "application/json"
                            }
                        ],
                        "body": {
                            "mode": "raw",
                            "raw": "{\n  \"name\": \"Machine-New\",\n  \"location\": \"Factory Floor 2\",\n  \"sensor_type\": \"Vibration\",\n  \"status\": \"active\"\n}"
                        },
                        "url": {
                            "raw": "{{baseUrl}}/api/v1/data/machine",
                            "host": ["{{baseUrl}}"],
                            "path": ["api", "v1", "data", "machine"]
                        },
                        "description": "Create new machine (Mgmt/Supervisor)"
                    },
                    "response": []
                },
                {
                    "name": "List Machines",
                    "event": [
                        {
                            "listen": "test",
                            "script": {
                                "exec": [
                                    "pm.test(\"Status code is 200\", function () {",
                                    "    pm.response.to.have.status(200);",
                                    "});",
                                    "",
                                    "pm.test(\"List has machines\", function () {",
                                    "    var jsonData = pm.response.json();",
                                    "    pm.expect(jsonData.machines).to.be.an('array');",
                                    "});"
                                ],
                                "type": "text/javascript"
                            }
                        }
                    ],
                    "request": {
                        "auth": {
                            "type": "bearer",
                            "bearer": [
                                {
                                    "key": "token",
                                    "value": "{{access_token}}",
                                    "type": "string"
                                }
                            ]
                        },
                        "method": "GET",
                        "header": [],
                        "url": {
                            "raw": "{{baseUrl}}/api/v1/data/machines",
                            "host": ["{{baseUrl}}"],
                            "path": ["api", "v1", "data", "machines"]
                        },
                        "description": "List all machines"
                    },
                    "response": []
                },
                {
                    "name": "Ingest Sensor Data",
                    "event": [
                        {
                            "listen": "test",
                            "script": {
                                "exec": [
                                    "pm.test(\"Status code is 201\", function () {",
                                    "    pm.response.to.have.status(201);",
                                    "});",
                                    "",
                                    "pm.test(\"Data ingested successfully\", function () {",
                                    "    var jsonData = pm.response.json();",
                                    "    pm.expect(jsonData.status).to.eql('success');",
                                    "    pm.expect(jsonData.summary.total_readings).to.be.above(0);",
                                    "});"
                                ],
                                "type": "text/javascript"
                            }
                        }
                    ],
                    "request": {
                        "auth": {
                            "type": "bearer",
                            "bearer": [
                                {
                                    "key": "token",
                                    "value": "{{access_token}}",
                                    "type": "string"
                                }
                            ]
                        },
                        "method": "POST",
                        "header": [
                            {
                                "key": "Content-Type",
                                "value": "application/json"
                            }
                        ],
                        "body": {
                            "mode": "raw",
                            "raw": "{\n  \"gateway_id\": \"GW01\",\n  \"timestamp\": \"2025-12-13T08:00:00Z\",\n  \"batch\": [\n    {\n      \"machine_id\": \"d1c2084b-f16a-4eea-89d9-4402095d3af5\",\n      \"sensor_type\": \"Temperature\",\n      \"location\": \"Factory Floor 1\",\n      \"readings\": [\n        {\n          \"timestamp\": \"2025-12-13T08:00:00Z\",\n          \"temperature\": 75.5,\n          \"pressure\": 101.3,\n          \"speed\": 1500\n        }\n      ]\n    }\n  ]\n}"
                        },
                        "url": {
                            "raw": "{{baseUrl}}/api/v1/data/ingest",
                            "host": ["{{baseUrl}}"],
                            "path": ["api", "v1", "data", "ingest"]
                        },
                        "description": "Ingest data sensor secara batch dari gateway. \n\n**Format Body**:\n- `gateway_id`: ID Gateway pengirim\n- `timestamp`: Waktu pengiriman batch\n- `batch`: Array data mesin dan readings"
                    },
                    "response": []
                },
                {
                    "name": "Get Machine Data",
                    "event": [
                        {
                            "listen": "test",
                            "script": {
                                "exec": [
                                    "pm.test(\"Status code is 200\", function () {",
                                    "    pm.response.to.have.status(200);",
                                    "});",
                                    "",
                                    "pm.test(\"Response has machine data\", function () {",
                                    "    var jsonData = pm.response.json();",
                                    "    pm.expect(jsonData).to.have.property('machine');",
                                    "    pm.expect(jsonData).to.have.property('data');",
                                    "});"
                                ],
                                "type": "text/javascript",
                                "packages": {},
                                "requests": {}
                            }
                        }
                    ],
                    "request": {
                        "auth": {
                            "type": "bearer",
                            "bearer": [
                                {
                                    "key": "token",
                                    "value": "{{access_token}}",
                                    "type": "string"
                                }
                            ]
                        },
                        "method": "GET",
                        "header": [],
                        "url": {
                            "raw": "{{baseUrl}}/api/v1/data/machine/{{machine_id}}?start_time=2024-12-12T00:00:00Z&end_time=2025-12-14T23:59:59Z&aggregation_window=1h",
                            "host": ["{{baseUrl}}"],
                            "path": ["api", "v1", "data", "machine", "{{machine_id}}"],
                            "query": [
                                {
                                    "key": "start_time",
                                    "value": "2024-12-12T00:00:00Z",
                                    "description": "Start time (ISO 8601)"
                                },
                                {
                                    "key": "end_time",
                                    "value": "2025-12-14T23:59:59Z",
                                    "description": "End time (ISO 8601)"
                                },
                                {
                                    "key": "aggregation_window",
                                    "value": "1h",
                                    "description": "Window: 1m, 5m, 1h, 1d"
                                }
                            ]
                        },
                        "description": "Mengambil data historis mesin dengan agregasi\n\n**Aggregation Options**: 1m, 5m, 15m, 1h, 1d"
                    },
                    "response": []
                }
            ],
            "description": "Endpoint untuk ingestion dan retrieval data sensor"
        },
        {
            "name": "Configuration (Management Only)",
            "item": [
                {
                    "name": "Get Configuration",
                    "event": [
                        {
                            "listen": "test",
                            "script": {
                                "exec": [
                                    "pm.test(\"Status code is 200\", function () {",
                                    "    pm.response.to.have.status(200);",
                                    "});",
                                    "",
                                    "pm.test(\"Response has config\", function () {",
                                    "    var jsonData = pm.response.json();",
                                    "    pm.expect(jsonData).to.have.property('config');",
                                    "});"
                                ],
                                "type": "text/javascript"
                            }
                        }
                    ],
                    "request": {
                        "auth": {
                            "type": "bearer",
                            "bearer": [
                                {
                                    "key": "token",
                                    "value": "{{access_token}}",
                                    "type": "string"
                                }
                            ]
                        },
                        "method": "GET",
                        "header": [],
                        "url": {
                            "raw": "{{baseUrl}}/api/v1/config",
                            "host": ["{{baseUrl}}"],
                            "path": ["api", "v1", "config"]
                        },
                        "description": "Mengambil konfigurasi sistem\n\n**Required Permission**: read:config\n**Allowed Roles**: Management"
                    },
                    "response": []
                },
                {
                    "name": "Update Configuration",
                    "event": [
                        {
                            "listen": "test",
                            "script": {
                                "exec": [
                                    "pm.test(\"Status code is 200\", function () {",
                                    "    pm.response.to.have.status(200);",
                                    "});",
                                    "",
                                    "pm.test(\"Configuration updated\", function () {",
                                    "    var jsonData = pm.response.json();",
                                    "    pm.expect(jsonData.status).to.eql('success');",
                                    "    pm.expect(jsonData).to.have.property('updated_setting');",
                                    "});"
                                ],
                                "type": "text/javascript"
                            }
                        }
                    ],
                    "request": {
                        "auth": {
                            "type": "bearer",
                            "bearer": [
                                {
                                    "key": "token",
                                    "value": "{{access_token}}",
                                    "type": "string"
                                }
                            ]
                        },
                        "method": "POST",
                        "header": [
                            {
                                "key": "Content-Type",
                                "value": "application/json"
                            }
                        ],
                        "body": {
                            "mode": "raw",
                            "raw": "{\n  \"setting_name\": \"max_temperature_threshold\",\n  \"setting_value\": \"85.0\"\n}"
                        },
                        "url": {
                            "raw": "{{baseUrl}}/api/v1/config/update",
                            "host": ["{{baseUrl}}"],
                            "path": ["api", "v1", "config", "update"]
                        },
                        "description": "Update konfigurasi sistem\n\n**Required Permission**: write:config\n**Allowed Roles**: Management only"
                    },
                    "response": []
                }
            ],
            "description": "Endpoint untuk manajemen konfigurasi sistem (hanya Management)"
        },
        {
            "name": "System",
            "item": [
                {
                    "name": "Health Check",
                    "event": [
                        {
                            "listen": "test",
                            "script": {
                                "exec": [
                                    "pm.test(\"Status code is 200\", function () {",
                                    "    pm.response.to.have.status(200);",
                                    "});",
                                    "",
                                    "pm.test(\"System is healthy\", function () {",
                                    "    var jsonData = pm.response.json();",
                                    "    pm.expect(jsonData.status).to.eql('healthy');",
                                    "});"
                                ],
                                "type": "text/javascript"
                            }
                        }
                    ],
                    "request": {
                        "method": "GET",
                        "header": [],
                        "url": {
                            "raw": "{{baseUrl}}/health",
                            "host": ["{{baseUrl}}"],
                            "path": ["health"]
                        },
                        "description": "Cek kesehatan sistem"
                    },
                    "response": []
                },
                {
                    "name": "API Info",
                    "request": {
                        "method": "GET",
                        "header": [],
                        "url": {
                            "raw": "{{baseUrl}}/",
                            "host": ["{{baseUrl}}"],
                            "path": [""]
                        },
                        "description": "Informasi API"
                    },
                    "response": []
                }
            ],
            "description": "Endpoint sistem untuk health check dan info"
        }
    ],
    "event": [
        {
            "listen": "prerequest",
            "script": {
                "type": "text/javascript",
                "exec": [""]
            }
        },
        {
            "listen": "test",
            "script": {
                "type": "text/javascript",
                "exec": [""]
            }
        }
    ],
    "variable": [
        {
            "key": "baseUrl",
            "value": "http://localhost:5000",
            "type": "string"
        },
        {
            "key": "access_token",
            "value": "",
            "type": "string"
        },
        {
            "key": "refresh_token",
            "value": "",
            "type": "string"
        },
        {
            "key": "machine_id",
            "value": "d1c2084b-f16a-4eea-89d9-4402095d3af5",
            "type": "string"
        }
    ]
}
